# 第十七章 DMA介绍

## 1. 导入

    DMA(Direct Memory Access)—直接存储器存取，是单片机的一个外设，它的主要功能是用来搬数据，但是不需要占用CPU， 即在传输数据的时候，CPU可以干其他的事情，好像是多线程一样。数据传输支持从外设到存储器或者存储器到存储器， 这里的存储器可以是SRAM或者是FLASH。DMA控制器包含了DMA1和DMA2，其中DMA1有7个通道，DMA2有5个通道， 这里的通道可以理解为传输数据的一种管道。要注意的是DMA2只存在于大容量产品和互联型产品中。

## 2. DMA功能框图

    DMA控制器独立于内核，属于一个单独的外设，结构比较简单，从编程的角度来看，我们只需掌握功能框图中的三部分内容即可， 具体见图 [DMA框图](https://doc.embedfire.com/mcu/stm32/f103zhinanzhe/std/zh/latest/book/DMA.html#id3) ：

![](https://doc.embedfire.com/mcu/stm32/f103zhinanzhe/std/zh/latest/_images/DMA002.png)

### 2.1 DMA请求

### 2.2 通道

### 2.3 仲裁器

## 3. DMA数据配置

### 3.1 从哪里来到哪里去

### 3.2 要传多少，单位是什么

### 3.3 什么时候传输完成

## 4. DMA初始化结构体详解

## 5. DMA存储器到存储器模式实验

### 5.1 硬件设计

### 5.2 软件设计

#### 5.2.1 编程要点

#### 5.2.2 代码分析

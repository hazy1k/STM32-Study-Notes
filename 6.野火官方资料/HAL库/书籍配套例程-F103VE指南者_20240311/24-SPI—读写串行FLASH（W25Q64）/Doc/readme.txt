/*********************************************************************************************/
本文档使用 TAB = 4 对齐，使用keil5默认配置打开阅读比较方便。

【*】程序简介

-工程名称：W25Q64基本读写全程
-实验平台: 野火STM32 F103-指南者 开发板 


【 ！】功能简介：
读写板载的SPI FLASH芯片。

学习目的：学习STM32的SPI驱动。

【 ！！】注意事项：

FLASH芯片出厂前已有烧录数据，具体见下文FLASH使用情况说明。

【 ！】实验操作：
电脑端使用串口调试助手，选择电脑与STM32相连的COM口，设置为115200-N-8-1，
复位开发板，即可接收STM32串口发送给电脑的调试信息。

/***************************************************************************************************************/

【 ！】外部Flash使用情况说明（W25Q64）	
		

|-----------------------------------------------------------------------------------------------------------------------------------												
|序号    |文件名/工程		 |功能			            		  |起始地址	               |长度            
|-------|---------------------------|------------------------------------------ --------------|---------------------|------------------
|1        |外部flash读写例程	 |预留给裸机Flash测试			  |0		|1024 (BYTE)
|-------|---------------------------|---------------------------------------------------------|---------------------|------------------
|2        |裸机触摸屏例程	 |裸机触摸校准参数			                  |1024		|10 (BYTE)	  
|-------|---------------------------|---------------------------------------------------------|---------------------|-------------------
|3        |裸机中文显示例程	 |裸机中文字库（HZLIB.bin）			  |4096		|53*4096 (212KB)	
|-------|---------------------------|---------------------------------------------------------|---------------------|-------------------
|4        |app.c	                 |XBF字库文件（emWin使用,songti.xbf）		  |60*4096		|317*4096 (1.23MB)
|-------|---------------------------|---------------------------------------------------------|---------------------|--------------------
|5        |外部flash读写例程	 |文件系统中文支持字库(emWin使用,UNIGBK.BIN)	  |465*4096	|43*4096 (172KB)	
|-------|---------------------------|---------------------------------------------------------|---------------------|---------------------
|6        |Touch_CalibrationApp.c	 |电阻屏触摸校准参数（emWin使用）		  |510*4096	|34 (BYTE)			
|-------|---------------------------|---------------------------------------------------------|---------------------|----------------------
|7        |外部flash读写例程	 |文件系统中文支持字库(emWin使用,UNIGBK.BIN)	  |512*4096	|1536*4096 (6MB)	
|-------|---------------------------|---------------------------------------------------------|---------------------|-----------------------


*FLASH芯片的第一个扇区（0-4096字节）是专门预留给本实验及裸机触摸做测试的，
 若用户修改本实验，写入数据到其它扇区，会导致FLASH芯片其它数据毁坏，
 做其它用到这些数据的实验时需要重新给FLASH写入这些数据。
 
 可使用配套例程中的“刷外部FLASH程序”给FLASH恢复出厂数据。
 
/*******************************************************************************************************************/

【*】 引脚分配

FLASH(W25Q64)：
FLASH芯片的SPI接口与STM32的SPI3相连。
		SCK   <--->PA5
		MISO<--->PA6
		MOSI<--->PA7
		CS     <--->PC0

串口(TTL-USB TO USART)：
CH340的收发引脚与STM32的发收引脚相连。
	RX<--->PA9
	TX<--->PA10											

/*********************************************************************************************/
【*】程序描述

	<bsp_spi_flash.c>
		
		1.SPI_FLASH初始化
		2.擦除FLASH扇区函数定义
		3.擦除FLASH扇区函数（整片擦除）定义
		4.FLASH页写入的函数定义
		5.对FLASH写入数据的函数定义
		6.读取FLASH数据的函数定义
		7.读取FLASH ID的函数定义
		8.读取FLASH  DEVICE ID的函数定义
		9.FLASH 开始读的顺序定义
		10.使用SPI读取一个字节的数据的函数定义
		11.使用SPI发送一个字节的数据的函数定义
	 	12.使用SPI发送两个字节的数据的函数定义
		13.向FLASH发送 写使能 命令的函数定义
		14.等待到FLASH内部数据写入完毕的函数定义
		15.掉电模式的函数定义
		16.唤醒模式的函数定义
		17.等待超时回调函数

	<bsp_spi_flash.h>

		1.所用芯片W25Q64 FLASH_ID 的宏定义
		2.命令定义
		3.WIP(busy)标志
		4.SPI接口定义
		5.CS、SCK、MISO、MOSI引脚的时钟引脚的相关宏定义
		6.等待超时时间和信息输出的宏定义

	

		
/*********************************************************************************************/

【*】 联系我们

-野火官网  :https://embedfire.com
-野火论坛  :http://www.firebbs.cn
-野火商城  :https://yehuosm.tmall.com/
-野火资料下载中心：http://doc.embedfire.com/products/link

/*********************************************************************************************/
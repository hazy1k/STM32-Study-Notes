/*********************************************************************************************/

【*】程序简介

-工程名称：RTC 闹钟实验
-实验平台: 野火STM32 指南者 开发板 
-MDK版本：5.16
-ST固件库版本：3.5

【 ！】功能简介：
学习使用RTC功能 和 RTC 闹钟。

【*】注意事项：
在bsp_rtc.h文件中：
1.可设置宏USE_LCD_DISPLAY控制是否使用LCD显示
2.可设置宏RTC_CLOCK_SOURCE_LSI和RTC_CLOCK_SOURCE_LSE控制使用LSE晶振还是LSI晶振
3.STM32的LSE晶振要求非常严格，同样的电路、板子批量产品时总有些会出现问题。
  本实验中默认使用LSI晶振。
4.！！！若希望RTC在主电源掉电后仍然运行，需要给开发板的电池槽安装钮扣电池，
  ！！！且改成使用外部晶振模式RTC_CLOCK_SOURCE_LSE
  钮扣电池型号：CR1220
5.切换时钟源选择后，如发现液晶屏不显示内容或者串口输出显示RTC 时钟初始化失败，则需要整个断电和取掉电池，再重新装上电池和上电

2.8寸 屏幕芯片：ILI9341
3.2寸 屏幕芯片：ST7789V（现在生产使用）
开发板配套程序里已做兼容ILI9341和ST7789V（例程中的 LCD 函数仍以 ILI9341 为前缀命名）
高型号 STM32（如 STM32VET6/STM32ZET6 等）具有 FSMC 外设，直接使用 FSMC 接口实现 8080 时序
定义一个指向这些地址的指针，然后就可以通过指针直接修改该存储单元的内容，
FSMC 外设会自动完成数据访问过程，读写命令之类的操作不需要程序控制。

【 ！】实验操作：
当RTC时间等于main文件中clocktime变量的时间时，会响铃，响铃后按KEY2可以关闭。

电脑端使用串口调试助手，选择电脑与STM32相连的COM口，设置为115200-N-8-1，
复位开发板，即可接收STM32串口发送给电脑的调试信息。

程序开始使用默认时间，程序运行后可以按开发板KEY1键，然后根据串口调试助手提示输入时间。
！！！使用串口设置时间时，输入数字时注意末尾要加回车。

/*********************************************************************************************/

【*】 引脚分配

液晶屏：
液晶屏接口与STM32的FSMC接口相连，支持565格式，
使用FSMC产生8080时序与液晶屏驱动芯片ILI9341通讯.

		/*液晶控制信号线*/
		ILI9341_CS 	<--->	PD7      	//片选，选择NOR/SRAM块 BANK1_NOR/SRAM1
		ILI9341_DC  <---> 	PD11		//PD11为FSMC_A16,本引脚决定了访问LCD时使用的地址
		ILI9341_WR 	<---> 	PD5			//写使能
		ILI9341_RD  <---> 	PD4			//读使能
		ILI9341_RST	<---> 	PE1			//复位引脚
		ILI9341_BK 	<---> 	PD12 		//背光引脚
		
	数据信号线省略,本实验没有驱动触摸屏，详看触摸画板实验。
KEY:
两个按键均有硬件去抖，按下的时候均为高电平，不按时为低电平。

	KEY1<--->PA0
	KEY2<--->PC13
    
串口（TTL-USB TO USART）：
CH340的收发引脚与STM32的发收引脚相连。
	CH340  RXD  <----->  USART1  TX  (PA9)
	CH340  TXD  <----->  USART1  RX  (PA10)

BEEP蜂鸣器：
	BEEP(J21)	<--->PA8（J20)
	
	高电平响

【 ！】程序相关：

    1) 将 clocktime 结构体表示的时间转换为一个时间戳，并将其存储在 clock_timestamp 变量中。
    2) 将该时间戳设置为RTC的闹钟时间,当计数器的值与闹钟寄存器的值相等时，可产生闹钟事件或中断，
    该事件可以把睡眠、停止和待机模式的 STM32 芯片唤醒。
    3) 编写中断服务函数，当检查到闹钟中断RTC_IT_ALR，将TimeAlarm置1。
    
/*********************************************************************************************/

【*】 版本

-程序版本：1.0
-发布日期：2013-10

/*********************************************************************************************/

【*】 联系我们

-野火官网  :https://embedfire.com
-野火论坛  :http://www.firebbs.cn
-野火商城  :https://yehuosm.tmall.com
-野火资料下载中心 :http://doc.embedfire.com/products/link

/*********************************************************************************************/